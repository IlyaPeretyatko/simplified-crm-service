# Документация к REST API

## Инструкция по сборке и запуску

### Требования
- Установленный [JDK](https://www.oracle.com/java/technologies/javase-jdk21-downloads.html) (версия 21)
- Установленный [Gradle](https://gradle.org/install/) (версия 8.0 или выше)

### Сборка проекта
1. Откройте терминал и перейдите в корневую директорию вашего проекта.
2. Выполните команду для сборки проекта:
   ```bash
   gradle build
   ```

### Запуск приложения
1. После успешной сборки проекта выполните команду для запуска приложения:
   ```bash
   gradle bootRun
   ```
2. Приложение будет запущено на [http://localhost:8080](http://localhost:8080) (по умолчанию).

### Проверка работы
- Откройте браузер и перейдите по адресу [http://localhost:8080/api/sellers](http://localhost:8080/api/sellers), чтобы увидеть список всех продавцов.

---


## Общие сведения
API предоставляет доступ к информации о продавцах и транзакциях. Это позволяет создавать, обновлять, удалять и получать данные о продавцах и их транзакциях.

## Аутентификация
На данный момент API не требует аутентификации.

---

## Продавцы (Sellers)

### Получить всех продавцов
- **URL:** `/api/sellers`
- **Метод:** `GET`
- **Ответ:**
    - **200 OK** - Список всех продавцов.
    - **Пример ответа:**
  ```json
  [
      {
          "id": 1,
          "name": "Продавец 1",
          "contactInfo": "контакт_инфо_1",
          "registrationDate": "2023-10-23T10:15:30"
      },
      {
          "id": 2,
          "name": "Продавец 2",
          "contactInfo": "контакт_инфо_2",
          "registrationDate": "2023-10-24T10:15:30"
      }
  ]
  ```

### Получить продавца по ID
- **URL:** `/api/sellers/{id}`
- **Метод:** `GET`
- **URL-параметры:**
    - `id` - ID продавца
- **Ответ:**
    - **200 OK** - Информация о продавце.
    - **404 Not Found** - Продавец не найден.
    - **Пример ответа:**
  ```json
  {
      "id": 1,
      "name": "Продавец 1",
      "contactInfo": "контакт_инфо_1",
      "registrationDate": "2023-10-23T10:15:30"
  }
  ```

### Создать нового продавца
- **URL:** `/api/sellers`
- **Метод:** `POST`
- **Тело запроса:**
  ```json
  {
      "name": "Имя продавца",
      "contactInfo": "Контактная информация",
      "registrationDate": "2023-10-23T10:15:30"
  }
  ```
- **Ответ:**
    - **201 Created** - Созданный продавец.
    - **Пример ответа:**
  ```json
  {
      "id": 3,
      "name": "Имя продавца",
      "contactInfo": "Контактная информация",
      "registrationDate": "2023-10-23T10:15:30"
  }
  ```

### Обновить информацию о продавце
- **URL:** `/api/sellers/{id}`
- **Метод:** `PATCH`
- **URL-параметры:**
    - `id` - ID продавца
- **Тело запроса:**
  ```json
  {
      "name": "Новое имя",
      "contactInfo": "Новая контактная информация"
  }
  ```
- **Ответ:**
    - **200 OK** - Обновленная информация о продавце.
    - **404 Not Found** - Продавец не найден.
    - **Пример ответа:**
  ```json
  {
      "id": 1,
      "name": "Новое имя",
      "contactInfo": "Новая контактная информация",
      "registrationDate": "2023-10-23T10:15:30"
  }
  ```

### Удалить продавца
- **URL:** `/api/sellers/{id}`
- **Метод:** `DELETE`
- **URL-параметры:**
    - `id` - ID продавца
- **Ответ:**
    - **204 No Content** - Успешное удаление.
    - **404 Not Found** - Продавец не найден.

### Получить транзакции продавца
- **URL:** `/api/sellers/{id}/transactions`
- **Метод:** `GET`
- **URL-параметры:**
    - `id` - ID продавца
- **Ответ:**
    - **200 OK** - Список транзакций продавца.
    - **404 Not Found** - Продавец не найден.
    - **Пример ответа:**
  ```json
  [
      {
          "id": 1,
          "seller": { "id": 1, "name": "Продавец 1" },
          "amount": 100,
          "paymentType": "CASH",
          "transactionDate": "2023-10-23T10:15:30"
      },
      {
          "id": 2,
          "seller": { "id": 1, "name": "Продавец 1" },
          "amount": 150,
          "paymentType": "CARD",
          "transactionDate": "2023-10-23T11:00:00"
      }
  ]
  ```

### Получить лучшего продавца за период
- **URL:** `/api/sellers/best`
- **Метод:** `GET`
- **Тело запроса:**
  ```json
  {
      "start": "2023-10-01T00:00:00",
      "end": "2023-10-31T23:59:59"
  }
  ```
- **Ответ:**
    - **200 OK** - Информация о лучшем продавце.
    - **404 Not Found** - Продавец не найден.
    - **Пример ответа:**
  ```json
  {
      "id": 1,
      "name": "Лучший продавец",
      "contactInfo": "контакт_инфо_лучший",
      "registrationDate": "2023-10-01T10:15:30"
  }
  ```

### Получить продавцов с общей суммой транзакций меньше заданной
- **URL:** `/api/sellers/sumLessThen/{sum}`
- **Метод:** `GET`
- **URL-параметры:**
    - `sum` - Максимальная сумма транзакций
- **Ответ:**
    - **200 OK** - Список продавцов, сумма транзакций которых меньше указанной.
    - **Пример ответа:**
  ```json
  [
      {
          "id": 2,
          "name": "Продавец 2",
          "contactInfo": "контакт_инфо_2",
          "registrationDate": "2023-10-24T10:15:30"
      }
  ]
  ```

---

## Транзакции (Transactions)

### Получить все транзакции
- **URL:** `/api/transactions`
- **Метод:** `GET`
- **Ответ:**
    - **200 OK** - Список всех транзакций.
    - **Пример ответа:**
  ```json
  [
      {
          "id": 1,
          "seller": { "id": 1, "name": "Продавец 1" },
          "amount": 100,
          "paymentType": "CASH",
          "transactionDate": "2023-10-23T10:15:30"
      },
      {
          "id": 2,
          "seller": { "id": 2, "name": "Продавец 2" },
          "amount": 200,
          "paymentType": "CARD",
          "transactionDate": "2023-10-24T11:00:00"
      }
  ]
  ```

### Получить транзакцию по ID
- **URL:** `/api/transactions/{id}`
- **Метод:** `GET`
- **URL-параметры:**
    - `id` - ID транзакции
- **Ответ:**
    - **200 OK** - Информация о транзакции.
    - **404 Not Found** - Транзакция не найдена.
    - **Пример ответа:**
  ```json
  {
      "id": 1,
      "seller": { "id": 1, "name": "Продавец 1" },
      "amount": 100,
      "paymentType": "CASH",
      "transactionDate": "2023-10-23T10:15:30"
  }
  ```

### Создать новую транзакцию
- **URL:** `/api/transactions`
- **Метод:** `POST`
- **Тело запроса:**
  ```json
  {
      "seller": { "id": 1 },
      "amount": 100,
      "paymentType": "CASH",
      "transactionDate": "2023-10-23T10:15:30"
  }
  ```
- **Ответ:**
    - **201 Created** - Созданная транзакция.
    - **Пример ответа:**
  ```json
  {
      "id": 3,
      "seller": { "id": 1, "name": "Продавец 1" },
      "amount": 100,
      "paymentType": "CASH",
      "transactionDate": "2023-10-23T10:15:30"
  }
  ```

### Обновить информацию о транзакции
- **URL:** `/api/transactions/{id}`
- **Метод:** `PATCH`
- **URL-параметры:**
    - `id` - ID транзакции
- **Тело запроса:**
  ```json
  {
      "amount": 150,
      "paymentType": "CARD"
  }
  ```
- **Ответ:**
    - **200 OK** - Обновленная информация о транзакции.
    - **404 Not Found** - Транзакция не найдена.
    - **Пример ответа:**
  ```json
  {
      "id": 1,
      "seller": { "id": 1, "name": "Продавец 1" },
      "amount": 150,
      "paymentType": "CARD",
      "transactionDate": "2023-10-23T10:15:30"
  }
  ```

### Удалить транзакцию
- **URL:** `/api/transactions/{id}`
- **Метод:** `DELETE`
- **URL-параметры:**
    - `id` - ID транзакции
- **Ответ:**
    - **204 No Content** - Успешное удаление.
    - **404 Not Found** - Транзакция не найдена.

---

## Обработка ошибок
При возникновении ошибок API возвращает соответствующие сообщения с описанием проблемы. Используются (при наличии) соответствующие коды состояния HTTP.

- **404 Not Found** - Если объект с указанным ID не найден.
- **400 Bad Request** - Если запрос не соответствует ожиданиям API (например, отсутствуют необходимые поля).